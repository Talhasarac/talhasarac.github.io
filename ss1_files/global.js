(function(){"use strict";let A=!1,I=!1,L=[],U=!1,E=[],y=[],S;const _=e=>{const t=typeof $=="function"&&typeof $.fn=="object"&&typeof $.fn.dataTable=="function";let o=t?[]:document.querySelectorAll(".app"),a=t?[]:document.querySelectorAll(".package");t&&($($.fn.dataTable.tables()).each(function(){const i=$(this).DataTable().table();o=i.rows(".app").nodes().reduce(function(n,c){return n.push(c),n},o),a=i.rows(".package").nodes().reduce(function(n,c){return n.push(c),n},a)}),o.length===0&&document.body.classList.contains("page-calculator")&&(o=document.querySelectorAll(".app")));const l=[],p=[];for(const i of o){const n=+i.dataset.appid,c=l[n];c?c.push(i):l[n]=[i]}o=null;for(const i of a){const n=+i.dataset.subid,c=p[n];c?c.push(i):p[n]=[i]}if(a=null,e.rgFollowedApps){window.SteamDB.FollowedApps=new Set(e.rgFollowedApps);for(const i of e.rgFollowedApps){const n=l[i];if(n)for(const c of n)c.classList.add("followed")}}if(e.rgWishlist){window.SteamDB.WishedApps=new Set(e.rgWishlist);for(const i of e.rgWishlist){const n=l[i];if(n)for(const c of n)c.classList.add("wished")}}if(e.rgAppsInCart)for(const i of e.rgAppsInCart){const n=l[i];if(n)for(const c of n)c.classList.add("cart")}if(e.rgOwnedApps){window.SteamDB.OwnedApps=new Set(e.rgOwnedApps);for(const i of e.rgOwnedApps){const n=l[i];if(n)for(const c of n)c.classList.add("owned")}}if(e.rgIgnoredApps)for(let i of Object.keys(e.rgIgnoredApps)){i=+i,window.SteamDB.IgnoredApps.add(i);const n=l[i];if(n)for(const c of n)c.classList.add("ignored")}if(e.rgOwnedPackages&&(window.SteamDB.OwnedPackages=new Set(e.rgOwnedPackages)),window.SteamDB.OwnedPackages.add(0),p.length>0){if(e.rgPackagesInCart)for(const i of e.rgPackagesInCart){const n=p[i];if(n)for(const c of n)c.classList.add("cart")}if(e.rgOwnedPackages)for(const i of e.rgOwnedPackages){const n=p[i];if(n)for(const c of n)c.classList.add("owned")}}};window.SteamDB={FollowedApps:new Set,IgnoredApps:new Set,OwnedApps:new Set,WishedApps:new Set,OwnedPackages:new Set,OnExtensionUserdataLoaded:e=>{if(U){e();return}E.push(e)},EnhanceLazyLoadedApps:e=>{const t=e.querySelectorAll(".app");for(const o of t){const a=+o.dataset.appid;window.SteamDB.FollowedApps.has(a)&&o.classList.add("followed"),window.SteamDB.WishedApps.has(a)&&o.classList.add("wished"),window.SteamDB.OwnedApps.has(a)&&o.classList.add("owned"),window.SteamDB.IgnoredApps.has(a)&&o.classList.add("ignored")}window.SteamDB.BindHover(e)},BindHover:()=>{},HideHoverIfAny:()=>{},Alert:(e,t=null)=>{const o=document.createElement("toast-notification");return t!==null&&(o.title=t),o.body=e,document.querySelector("#js-notifications").append(o),o},Storage:{Get:function(e){try{return window.localStorage.getItem(e)}catch{return null}},Set:function(e,t){try{window.localStorage.setItem(e,t)}catch{}},Remove:function(e){try{window.localStorage.removeItem(e)}catch{}}},LazyLoad:function(e,t){if(!("IntersectionObserver"in window)){t();return}S||(S=new window.IntersectionObserver(o=>{o.forEach(a=>{a.isIntersecting&&(S.unobserve(a.target),a.target.dispatchEvent(new Event("lazyload")))})})),S.observe(e),e.addEventListener("lazyload",t,{once:!0})},RequirePageScreenshotViewer:function(e,t=!1){if(t){for(let o=0;o<y.length;o++)y[o](e);y=[],window.SteamDB.RequirePageScreenshotViewer=o=>o(e)}else y.push(e)},RequireHighstock:function(e){if(window.Highcharts){T(),e();return}if(L.push(e),A)return;A=!0;const t=document.createElement("script");t.nonce=document.querySelector("script[nonce]").nonce,t.src="/static/js/vendor/highstock.js?v=7e6dcc4e994a16c8",t.integrity="sha512-fm3MTplKFshi+qB795grWdXMPXdeYLNqHUU0gvaE63vkiqjHWE9qY4ykl2fJMU/uguzfsOg9+aq9y085PGuUcA==",t.async=!0,t.addEventListener("load",function(){T();for(const o of L)o();L=[],A=!1}),document.head.appendChild(t)}};const T=()=>{I||(I=!0,window.Highcharts.setOptions({accessibility:{enabled:!1},chart:{animation:!1,zooming:{type:"x",mouseWheel:{enabled:!1}},backgroundColor:"transparent",spacing:[5,0,15,0],style:{fontSize:"16px",fontFamily:"inherit"}},title:{style:{color:"var(--body-color)"}},yAxis:{gridLineColor:"rgba(180, 180, 180, 0.2)",labels:{style:{color:"var(--muted-color)"}}},xAxis:{lineColor:"var(--border-color)",tickColor:"var(--border-color)",crosshair:{width:30,color:"rgba(180, 180, 180, 0.2)"},labels:{style:{color:"var(--body-color)"}}},legend:{itemHoverStyle:{color:"var(--link-color)"},itemHiddenStyle:{color:"var(--border-color)"},itemStyle:{color:"var(--body-color)",fontSize:"16px",fontWeight:"400"}},plotOptions:{series:{animation:!1,dataGrouping:{enabled:!1},states:{hover:{lineWidthPlus:0}}}},credits:{text:"data by SteamDB.info (powered by highcharts.com)",position:{x:0,y:-3},style:{fontSize:"12px",color:"var(--muted-color)"}},exporting:{buttons:{contextButton:{symbol:"url(/static/img/download.svg)",symbolSize:24,symbolX:26,symbolY:24,menuItems:["downloadCSV","downloadXLS"],theme:{fill:"none",states:{hover:{fill:"var(--border-color-2)"},select:{fill:"var(--border-color)"}}}}}},navigation:{menuStyle:{borderRadius:"6px",borderColor:"var(--border-color)",background:"var(--tooltip-bg)",boxShadow:"-8px -8px 24px rgba(149, 157, 165, 0.2)"},menuItemStyle:{color:"var(--body-bg-color)",transition:"none",fontSize:"14px"}},rangeSelector:{inputEnabled:!1,labelStyle:{color:"var(--body-color)"},buttonTheme:{width:40,height:24,fill:"none",r:6,stroke:"var(--border-color)","stroke-width":"1px",style:{color:"var(--link-color)",fontSize:"16px",fontWeight:"bold"},states:{hover:{fill:"var(--border-color)",style:{color:"var(--link-color-hover)"}},select:{fill:"var(--border-color)",style:{color:"var(--body-color)"}},disabled:{"stroke-width":0,style:{color:"var(--border-color)"}}}}},navigator:{handles:{backgroundColor:"var(--border-color-2)",borderColor:"var(--link-color)"},xAxis:{gridLineColor:"var(--border-color)",labels:{style:{color:"var(--muted-color)",opacity:1}}},series:{lineWidth:2},outlineColor:"var(--border-color)"},tooltip:{shared:!0,split:!1,shadow:!1,borderWidth:0,borderRadius:6,headerFormat:"{point.key} UTC<br/>",backgroundColor:"var(--tooltip-bg)",style:{fontSize:"14px",color:"var(--body-bg-color)"}}}))},D=(e,t,o)=>{document.querySelectorAll(e).forEach(a=>{o?a.classList.add(t):a.classList.remove(t)})},h=(e,t,o)=>D(`.app[data-appid="${e}"]`,t,o),v=(e,t,o)=>D(`.package[data-subid="${e}"]`,t,o),W=(e,t,o)=>D(`.bundle[data-bundleid="${e}"]`,t,o),H=e=>{if(!(!e.response||!e.response.success)){if(e.request.appid>0){const t=e.request.appid;switch(e.request.contentScriptQuery){case"StoreWishlistAdd":window.SteamDB.WishedApps.add(t),h(t,"wished",!0);break;case"StoreWishlistRemove":window.SteamDB.WishedApps.delete(t),h(t,"wished",!1);break;case"StoreFollow":window.SteamDB.FollowedApps.add(t),h(t,"followed",!0);break;case"StoreUnfollow":window.SteamDB.FollowedApps.delete(t),h(t,"followed",!1);break;case"StoreIgnore":window.SteamDB.IgnoredApps.add(t),h(t,"ignored",!0);break;case"StoreUnignore":window.SteamDB.IgnoredApps.delete(t),h(t,"ignored",!1);break;case"Watch":h(t,"watched",!0);break;case"Unwatch":h(t,"watched",!1);break}}else if(e.request.subid>0){const t=e.request.subid;switch(e.request.contentScriptQuery){case"StoreAddToCart":v(t,"cart",!0);break;case"StoreAddFreeLicense":v(t,"owned",!0);break;case"Watch":v(t,"watched",!0);break;case"Unwatch":v(t,"watched",!1);break}}else if(e.request.bundleid>0){const t=e.request.bundleid;switch(e.request.contentScriptQuery){case"Watch":W(t,"watched",!0);break;case"Unwatch":W(t,"watched",!1);break}}}};if("BroadcastChannel"in window){let e=null;try{e=new BroadcastChannel("steamdb-extension"),e.addEventListener("message",t=>{t&&t.data&&t.data.type==="steamdb:extension-response"&&H(t.data)})}catch{}window.addEventListener("message",t=>{if(!(!t||!t.data)&&t.origin===window.location.origin)if(t.data.type==="steamdb:extension-loaded"){U=!0,_(t.data.data);for(const o of E)o();E=[]}else if(t.data.type==="steamdb:extension-init"){const o=document.getElementById("steamdb-extension-protip");o&&(o.hidden=!0),"OnExtensionInit"in window.SteamDB&&window.SteamDB.OnExtensionInit(t.data.data)}else if(t.data.type==="steamdb:extension-error"){try{if(window.sessionStorage.getItem("extension_error_hidden")&&location.pathname!=="/freepackages/")return}catch{}const o=window.SteamDB.Alert(t.data.error,"Extension error");if(typeof InstallTrigger<"u"||navigator.userAgent.includes(" Firefox/")){const l=document.createElement("div");l.textContent="If you use Firefox containers, extension is not compatible with it.",o.append(l)}const a=document.createElement("a");a.className="btn btn-sm btn-primary",a.href="https://store.steampowered.com/login/",a.textContent="Sign in on the Steam Store",o.append(a),o.addEventListener("toast-close",()=>{try{window.sessionStorage.setItem("extension_error_hidden","1")}catch{}})}else t.data.type==="steamdb:extension-response"&&(e!==null&&e.postMessage(t.data),H(t.data),(!t.data.response||!t.data.response.success)&&!location.pathname.startsWith("/freepackages/")&&(window.SteamDB.Alert(`Something went wrong.
`+(t.data.response&&t.data.response.error||"Unknown error. Are you logged in on the Steam store?"),"Extension error"),console.error(t.data.response)))})}const q=e=>{const t=[];if(e.forEach((o,a)=>{const l=a.toLowerCase();(l==="__cf_chl_captcha_tk__"||l==="__cf_chl_jschl_tk__"||l==="ref"||l==="fbclid"||l.startsWith("utm_"))&&t.push(a)}),t.length>0){for(const o of t)e.delete(o);window.history.replaceState(null,null,Array.from(e).length?`${location.pathname}?${e}`:location.pathname)}},b=document.querySelector(".header"),f=document.querySelector(".header-menu-container"),x=document.querySelector("#js-header-hamburger"),O=document.querySelector(".account-menu"),P=document.querySelector(".header-user-avatar");P&&P.addEventListener("click",e=>{e.preventDefault(),O.hidden=!O.hidden}),x.addEventListener("click",function(e){f.hidden=!f.hidden,f.hidden||(f.querySelector(".header-menu").focus(),b.classList.remove("header-search-focus"),window.SteamDB.HideHoverIfAny())}),f.addEventListener("click",function(e){e.target.className===f.className&&(f.hidden=!0)});const B=document.getElementById("js-header-form"),m=B.querySelector(".field");if(document.addEventListener("keydown",e=>{if(e.key==="Escape"){if(document.documentElement.classList.contains("js-screenshots-shown"))return;f.hidden?b.classList.remove("header-search-focus"):(f.hidden=!0,x.focus())}e.ctrlKey||e.metaKey||["INPUT","TEXTAREA","SELECT","BUTTON"].includes(e.target.tagName)||(e.key==="/"||e.key==="s"?(e.preventDefault(),m.focus()):e.key==="m"&&x.click())}),B){B.addEventListener("submit",function(s){const d=m.value.replace(/^\s+|\s+$/g,"");let r=d.match(/^([0-9]{1,7})$/);if(r!==null){window.location=`/app/${r[0]}/`,s.preventDefault();return}if(r=d.match(/(7656119[0-9]{10})/),r!==null){window.location=`/calculator/${r[1]}/`,s.preventDefault();return}if(r=d.match(/(?:id|profiles)\/([\d\w-]+)/),r!==null){window.location=`/calculator/?player=${r[1]}`,s.preventDefault();return}r=d.match(/(app|sub|bundle|depot|dlc)\/([0-9]{1,8})/),r!==null&&(r[1]==="dlc"&&(r[1]="app"),window.location=`/${r[1]}/${r[2]}/`,s.preventDefault())},!1);const e=document.getElementById("js-search-suggestions"),t=document.getElementById("js-search-tips"),o=new Map;let a=0,l="",p;const i=()=>{a=0;const s=new URLSearchParams;s.append("x-algolia-agent","SteamDB Autocompletion"),s.append("x-algolia-application-id","94HE6YATEI"),s.append("x-algolia-api-key","338033d8e504a8a3f98452c637d713b9"),s.append("hitsPerPage","15"),s.append("attributesToSnippet",null),s.append("attributesToHighlight","name"),s.append("attributesToRetrieve","objectID,lastUpdated"),s.append("query",l),p&&p.abort(),p=new AbortController,fetch("https://94he6yatei-dsn.algolia.net/1/indexes/steamdb/?"+s.toString(),{signal:p.signal}).then(d=>d.json()).then(d=>{o.set(s.get("query"),d),p=null,n(d)}).catch(()=>{})},n=s=>{const d=document.body.dataset.steamCdn;let r=e.querySelector(".focus"),k=-1;if(r&&(k=+r.dataset.appid),t.hidden=!0,e.replaceChildren(),window.SteamDB.HideHoverIfAny(),!s.nbHits){const g=document.createElement("span");g.innerText="No results found.",e.appendChild(g);return}for(const g of s.hits){const w=+g.objectID,u=document.createElement("a");u.classList.add("app"),u.dataset.appid=w,u.href=`/app/${w}/`,u.innerHTML=g._highlightResult.name.value,window.SteamDB.OwnedApps.has(w)?u.classList.add("owned"):window.SteamDB.WishedApps.has(w)?u.classList.add("wished"):window.SteamDB.FollowedApps.has(w)&&u.classList.add("followed"),k===w&&(k=-1,u.classList.add("focus"));const C=document.createElement("img");C.alt="",C.src=`${d}steam/apps/${w}/capsule_sm_120.jpg?t=${g.lastUpdated}`,u.prepend(C),e.appendChild(u)}k>-1&&(r=e.firstElementChild,r&&r.classList.add("focus")),window.SteamDB.BindHover(e)},c=()=>{b.classList.add("header-search-focus"),f.hidden=!0,window.SteamDB.HideHoverIfAny()};m.addEventListener("keydown",function(s){if(s.key==="ArrowUp"||s.key==="ArrowDown"){s.preventDefault();const d=e.querySelector(".focus");let r;s.key==="ArrowUp"?(d&&(r=d.previousSibling),r||(r=e.lastElementChild)):(d&&(r=d.nextSibling),r||(r=e.firstElementChild)),r&&(d&&d.classList.remove("focus"),r.classList.add("focus"))}else if(s.key==="Enter"){if(s.ctrlKey){const r=new URLSearchParams;r.append("query",l),window.location.href=`/instantsearch/?${r.toString()}`,s.preventDefault();return}const d=e.querySelector(".focus");d&&(d.click(),s.preventDefault())}else s.key==="Escape"&&m.blur()}),m.addEventListener("input",function(){c();const s=this.value;if(!s||s.length>200){e.replaceChildren(),l="",t.hidden=!1,window.SteamDB.HideHoverIfAny();return}if(l===s)return;l=s;const d=o.get(l);if(d){clearTimeout(a),a=0,n(d);return}a||(a=setTimeout(i,200))}),document.querySelector(".header-search-close").addEventListener("click",()=>{b.classList.remove("header-search-focus")}),document.querySelector(".header-search-side-close").addEventListener("click",()=>{b.classList.remove("header-search-focus")}),document.querySelector(".header-search-mobile").addEventListener("click",()=>{c(),m.focus()}),m.addEventListener("focus",c)}if(window.location.hostname==="steamdb.info"){const e=new URLSearchParams(location.search);q(e)}"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js",{scope:"/"}).catch(e=>{console.error(e)})})();
