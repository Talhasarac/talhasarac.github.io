(function(){"use strict";if(!("BroadcastChannel"in window))return;const l=0,t=1,i=2,r=parseInt(document.querySelector(".scope-app").dataset.appid,10),o=document.getElementById("js-extension-wishlist"),s=document.getElementById("js-extension-follow"),a=document.getElementById("js-extension-ignore");let c=!1,d=!1,f=!1,w=!1;SteamDB.OnExtensionUserdataLoaded(()=>{window.SteamDB.OwnedApps.has(r)?o&&o.remove():window.SteamDB.WishedApps.has(r)&&g(t),window.SteamDB.FollowedApps.has(r)&&u(t),window.SteamDB.IgnoredApps.has(r)&&p(t),w=!0,o&&(o.setAttribute("aria-label",`Wishlist on the Steam Store
via browser extension`),o.classList.remove("disabled")),s&&(s.setAttribute("aria-label",`Follow on the Steam Store
via browser extension`),s.classList.remove("disabled")),a&&(a.setAttribute("aria-label",`Ignore on the Steam Store
via browser extension`),a.classList.remove("disabled"))}),o&&o.addEventListener("click",e=>{w&&(e.preventDefault(),c!==i&&(h(o),S(c===t?"StoreWishlistRemove":"StoreWishlistAdd"),c=i))}),s&&s.addEventListener("click",e=>{w&&(e.preventDefault(),d!==i&&(h(s),S(d===t?"StoreUnfollow":"StoreFollow"),d=i))}),a&&a.addEventListener("click",e=>{w&&(e.preventDefault(),f!==i&&(h(a),S(f===t?"StoreUnignore":"StoreIgnore"),f=i))});function h(e){e.innerHTML='<span class="loader"></span>'}function S(e){window.postMessage({type:"steamdb:extension-query",contentScriptQuery:e,appid:r},window.location.origin)}function g(e){c=e,o&&(o.classList.toggle("wished",e===t),o.textContent=e===t?"Remove from wishlist":"Wishlist")}function u(e){d=e,s&&(s.classList.toggle("followed",e===t),s.textContent=e===t?"Unfollow":"Follow")}function p(e){f=e,a&&(a.classList.toggle("ignored",e===t),a.textContent=e===t?"Unignore":"Ignore")}function b(e){const n=document.getElementById("js-watch"),m=n.querySelector("#js-watch-text");n.classList.toggle("watched",e===t),n.dataset.watched=e===t,m.textContent=e===t?"Unwatch":"Watch"}try{new BroadcastChannel("steamdb-extension").addEventListener("message",n=>{if(!(!n||n.origin!==window.location.origin)&&n.data&&n.data.type==="steamdb:extension-response"){if(!n.data.response||!n.data.response.success||n.data.request.appid!==r)return;switch(n.data.request.contentScriptQuery){case"StoreWishlistAdd":g(t);break;case"StoreWishlistRemove":g(l);break;case"StoreFollow":u(t);break;case"StoreUnfollow":u(l);break;case"StoreIgnore":p(t);break;case"StoreUnignore":p(l);break;case"Watch":b(t);break;case"Unwatch":b(l);break}}})}catch{}})();
