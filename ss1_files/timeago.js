class TimeAgo{static format(t){let i=!1;t<0&&(t=-t,i=!0);const e=Math.round(t/1e3),n=Math.round(e/60),o=Math.round(n/60),a=Math.round(o/24),s=Math.round(a/30),f=Math.round(s/12),r=(l,h)=>{let u=0;switch(h){case"second":u=1e3;break;case"minute":u=60100;break;case"hour":u=61e3;break;case"day":u=602e3;break}return{refresh:u,textContent:this.formatter.format(l,h)}};return i?s>=18?r(f,"year"):a>=30?r(s,"month"):o>=24?r(a,"day"):n>=60?r(o,"hour"):e>=60?r(n,"minute"):r(e,"second"):e<60?r(-e,"second"):n<60?r(-n,"minute"):o<24?r(-o,"hour"):a<30?r(-a,"day"):s<18?r(-s,"month"):r(-f,"year")}static datetime(t){return new Date(this.isTime(t)?t.dateTime:t.dataset.time)}static isTime(t){return t.tagName==="TIME"}static init(t){t._timeago=this.datetime(t),t._timeago%864e5===0?t.title=t._timeago.toLocaleDateString("en-GB",{dateStyle:"long",timeZone:"UTC"})+" UTC":t.title=t._timeago.toLocaleString("en-GB",{dateStyle:"long",timeStyle:"medium",hourCycle:"h23",timeZone:"UTC"})+" UTC",this.refresh(t)}static update(t,i){const e=i instanceof Date?i:new Date(i);t._timeago=e,this.refresh(t)}static refresh(t){clearTimeout(t._timeagoInterval);const i=Date.now()-t._timeago.getTime(),e=this.format(i);t.textContent=e.textContent,e.refresh&&(t._timeagoInterval=setTimeout(()=>{if(!document.documentElement.contains(t)){t._timeago=null,t._timeagoInterval=null;return}this.refresh(t)},e.refresh))}static initAll(t){const i=document.querySelectorAll(t);for(const e of i)this.init(e)}}"Intl"in window&&"RelativeTimeFormat"in window.Intl?TimeAgo.formatter=new Intl.RelativeTimeFormat("en",{numeric:"auto"}):TimeAgo.formatter={format:function(c,t){"use strict";return c<0?`${-c} ${t}s ago`:`in ${c} ${t}s`}};
